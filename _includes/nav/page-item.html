{% assign _current = page | contains_page: include.page, include.rel %}
<a href="{{ include.page.url | prepend: site.baseurl }}"{% if _current -%} class="usa-current"{% endif %}>{{ link.text | default: include.page.title }}</a>
{% if _current -%}
  {% assign _href_key = include.href_key %}
  {% assign _text_key = include.href_key %}
  {% assign _subnav = include.page.subnav %}
  {% if _subnav.data -%}
    {% assign _href_key = _subnav.href %}
    {% assign _text_key = _subnav.text %}
    {% assign _data_key = _subnav.data %}
    {% assign _subnav = site.data[_data_key] %}
  {% endif %}
  {% unless include.flat -%}
    {% if _subnav -%}
    <ul class="{{ include.subnav_class | default: 'usa-sidenav-sub_list' }}">{%
      include nav/list.html
      links=_subnav
      text_key=_text_key
      href_key=_href_key
    %}</ul>
    {% endif %}
  {% endunless %}
{% endif %}
